---
import { Icon } from 'astro-icon/components'
import { getCollection } from 'astro:content'

export interface SocialItem {
	href: string
	name: string
	icon: string
}

export interface LinkItem {
	name: string
	href: string
}

const logo = '/img/logo-white.png'
const description = 'Your trusted partner for residential and commercial plumbing in Dayton and Kettering, OH.'

// Get all services
const allServices = await getCollection('service')
const services = allServices
	.filter((item) => !item.data.draft)
	.sort((a, b) => {
		// Sort by order first, then by title
		if (a.data.order !== b.data.order) {
			return a.data.order - b.data.order
		}
		return a.data.title.localeCompare(b.data.title)
	})

const serviceLinks: LinkItem[] = services.map((service) => { 
	return {
		name: service.data.title, href: service.slug
	}
})

const quickLinks: LinkItem[] = [
	{ name: 'Home', href: '/' },
	{ name: 'Service Areas', href: '/areas-we-serve' },
	{ name: 'About Us', href: '/about' },
	{ name: 'Contact', href: '/contact' },
	{ name: 'Privacy Policy', href: '/privacy' },
	{ name: 'Terms of Services', href: '/terms' }
]

const copyrightName = 'Fluid Plumbing LLC'
const copyrightText = 'All rights reserved.'
const year = new Date().getFullYear()

const socials: SocialItem[] = [
	// { href: '#', name: 'Facebook', icon: 'bi:facebook' },
	// { href: '#', name: 'Instagram', icon: 'bi:instagram' },
	// { href: '#', name: 'Linkedin', icon: 'bi:linkedin' },
	// { href: '#', name: 'Youtube', icon: 'bi:youtube' }
]
---

<footer class="bg-dark-deep relative text-white">
	<div class="h-1 pipe-divider"></div>
	<div class="max-w-7xl mx-auto px-4 relative py-16">
		<div class="flex flex-wrap gap-16">
			<div class="max-w-md mr-auto">
				<div class="flex items-center gap-3 mb-4">
					<img src={logo} alt="logo light" class="max-w-56" />
				</div>
				<p class="text-metal-gray mb-6">{description}</p>
				{socials && <div class="flex gap-4">
					{
						socials.map((s) => (
							<a
								href={s.href}
								aria-label={s.name}
								class="w-10 h-10 bg-dark-surface rounded-lg flex items-center justify-center hover:bg-primary transition"
							>
								<Icon name={s.icon} class="w-5 h-5" />
							</a>
						))
					}
				</div>}
			</div>
			<div class="flex gap-16 md:flex-nowrap">
				<div>
					<h3 class="text-xl font-bold mb-6">Quick Links</h3>
					<ul class="space-y-3 text-metal-gray">
						{
							quickLinks.map((l) => (
								<li>
									<a href={l.href} class="hover:text-primary-light transition">
										{l.name}
									</a>
								</li>
							))
						}
					</ul>
				</div>
				<div>
					<h3 class="text-xl font-bold mb-6">Services</h3>
					<ul class="space-y-3 text-metal-gray">
						{
							serviceLinks.map((s) => (
								<li>
									<a href={s.href} class="hover:text-primary transition">
										{s.name}
									</a>
								</li>
							))
						}
					</ul>
				</div>
			</div>
		</div>
		<!-- <div class="grid md:grid-cols-2 lg:grid-cols-5 gap-10">
			<div class="lg:col-span-2 lg:pe-12">
				<div class="flex items-center gap-3 mb-4">
					<img src={logo} alt="logo light" class="max-w-56" />
				</div>
				<p class="text-metal-gray mb-6">{description}</p>
				<div class="flex gap-4">
					{
						socials.map((s) => (
							<a
								href={s.href}
								aria-label={s.name}
								class="w-10 h-10 bg-dark-surface rounded-lg flex items-center justify-center hover:bg-primary transition"
							>
								<Icon name={s.icon} class="w-5 h-5" />
							</a>
						))
					}
				</div>
			</div>
			<div>
				<h3 class="text-xl font-bold mb-6">Quick Links</h3>
				<ul class="space-y-3 text-metal-gray">
					{
						quickLinks.map((l) => (
							<li>
								<a href={l.href} class="hover:text-primary transition">
									{l.name}
								</a>
							</li>
						))
					}
				</ul>
			</div>
			<div>
				<h3 class="text-xl font-bold mb-6">Services</h3>
				<ul class="space-y-3 text-metal-gray">
					{
						serviceLinks.map((s) => (
							<li>
								<a href={s.href} class="hover:text-primary transition">
									{s.name}
								</a>
							</li>
						))
					}
				</ul>
			</div>
		</div> -->

		<!-- COPYRIGHT -->
		<div class="border-t border-dark-surface mt-12 pt-8 text-center text-metal-gray">
			<p>
				&copy; {year} - {copyrightName} - {copyrightText}
			</p>
		</div>
	</div>
</footer>
